<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raya Games</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        *{margin:0;padding:0;box-sizing:border-box;}
        :root{
            --bg-dark:#0a0a0f;--bg-card:#12121a;--bg-hover:#1a1a25;
            --border:#2a2a3a;--primary:#6366f1;--primary-dark:#4f46e5;
            --success:#22c55e;--warning:#f59e0b;--danger:#ef4444;
            --info:#06b6d4;--purple:#a855f7;--pink:#ec4899;
            --text:#f1f5f9;--text-muted:#94a3b8;
        }
        html{scroll-behavior:smooth;}
        body{
            background:var(--bg-dark);color:var(--text);
            font-family:'Inter',sans-serif;min-height:100vh;line-height:1.6;
            overflow-x:hidden;
        }

        /* ‚îÄ‚îÄ starfield canvas ‚îÄ‚îÄ */
        #starfield{
            position:fixed;top:0;left:0;width:100%;height:100%;
            pointer-events:none;z-index:0;opacity:.6;
        }

        .container{max-width:1200px;margin:0 auto;padding:40px 20px;position:relative;z-index:1;}

        /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
        header{text-align:center;margin-bottom:60px;position:relative;}
        header h1{
            font-size:clamp(32px,6vw,56px);font-weight:800;
            background:linear-gradient(135deg,var(--primary),var(--purple),var(--pink));
            -webkit-background-clip:text;-webkit-text-fill-color:transparent;
            margin-bottom:16px;
            filter:drop-shadow(0 0 30px rgba(99,102,241,.35));
        }
        header p{font-size:18px;color:var(--text-muted);max-width:600px;margin:0 auto;}

        /* music toggle in header */
        .music-fab{
            position:fixed;bottom:28px;right:28px;z-index:100;
            width:52px;height:52px;border-radius:50%;
            background:linear-gradient(135deg,var(--primary),var(--purple));
            border:none;cursor:pointer;
            display:flex;align-items:center;justify-content:center;
            font-size:22px;box-shadow:0 4px 20px rgba(99,102,241,.5);
            transition:transform .2s,box-shadow .2s;
            color:#fff;
        }
        .music-fab:hover{transform:scale(1.1);box-shadow:0 6px 28px rgba(99,102,241,.7);}
        .music-fab.active{animation:pulseFab 2s infinite;}
        @keyframes pulseFab{
            0%,100%{box-shadow:0 0 0 0 rgba(99,102,241,.5);}
            50%{box-shadow:0 0 0 14px rgba(99,102,241,0);}
        }

        /* ‚îÄ‚îÄ Game grid ‚îÄ‚îÄ */
        .games-grid{
            display:grid;
            grid-template-columns:repeat(auto-fill,minmax(340px,1fr));
            gap:24px;margin-bottom:60px;
        }
        .game-card{
            background:var(--bg-card);border:1px solid var(--border);
            border-radius:16px;padding:28px;
            transition:transform .25s ease,border-color .25s,box-shadow .25s;
            position:relative;overflow:hidden;cursor:default;
        }
        .game-card::before{
            content:'';position:absolute;top:0;left:0;right:0;height:3px;
            background:linear-gradient(90deg,var(--primary),var(--purple));
            opacity:0;transition:opacity .25s;
        }
        /* shimmer on hover */
        .game-card::after{
            content:'';position:absolute;inset:0;
            background:linear-gradient(135deg,transparent 40%,rgba(255,255,255,.03) 50%,transparent 60%);
            transform:translateX(-100%);transition:transform .5s;pointer-events:none;
        }
        .game-card:hover{
            transform:translateY(-5px);border-color:var(--primary);
            box-shadow:0 20px 48px rgba(99,102,241,.22);
        }
        .game-card:hover::before{opacity:1;}
        .game-card:hover::after{transform:translateX(100%);}

        .game-icon{font-size:48px;margin-bottom:16px;display:block;
            transition:transform .2s;line-height:1;}
        .game-card:hover .game-icon{transform:scale(1.15) rotate(-3deg);}

        .game-card h2{font-size:22px;font-weight:700;margin-bottom:10px;}
        .game-card p{color:var(--text-muted);font-size:13px;margin-bottom:18px;line-height:1.65;}

        .game-features{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:20px;}
        .feature-tag{
            background:var(--bg-hover);padding:3px 10px;
            border-radius:20px;font-size:11px;color:var(--text-muted);
            border:1px solid transparent;transition:border-color .2s;
        }
        .game-card:hover .feature-tag{border-color:rgba(99,102,241,.2);}

        .play-btn{
            display:inline-flex;align-items:center;gap:8px;
            background:var(--primary);color:#fff;
            padding:11px 22px;border-radius:8px;text-decoration:none;
            font-weight:600;font-size:14px;transition:background .2s,transform .2s;
        }
        .play-btn:hover{background:var(--primary-dark);transform:translateY(-2px);}
        .play-btn.secondary{
            background:var(--bg-hover);border:1px solid var(--border);
            color:var(--text);
        }
        .play-btn.secondary:hover{background:var(--border);}
        .btn-group{display:flex;gap:10px;flex-wrap:wrap;}

        /* featured card */
        .featured{
            grid-column:1/-1;
            background:linear-gradient(135deg,var(--bg-card),rgba(99,102,241,.08));
            border-color:var(--primary);
        }
        .featured::before{opacity:1;}

        /* badge */
        .badge{
            position:absolute;top:16px;right:16px;
            background:linear-gradient(135deg,var(--warning),#f97316);
            padding:4px 12px;border-radius:20px;font-size:11px;font-weight:700;
            text-transform:uppercase;letter-spacing:.04em;
        }

        /* new badge glow */
        .badge-new{animation:glow 3s ease-in-out infinite;}
        @keyframes glow{
            0%,100%{box-shadow:0 0 0 0 rgba(255,160,50,.0);}
            50%{box-shadow:0 0 12px 2px rgba(255,160,50,.45);}
        }

        /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
        footer{
            text-align:center;padding:40px;
            border-top:1px solid var(--border);color:var(--text-muted);
        }
        footer a{color:var(--primary);text-decoration:none;}
        footer a:hover{text-decoration:underline;}

        @media(max-width:768px){
            header h1{font-size:32px;}
            .games-grid{grid-template-columns:1fr;}
            .featured{grid-column:1;}
        }
    </style>
</head>
<body>

<!-- Starfield background -->
<canvas id="starfield"></canvas>

<!-- Floating music FAB -->
<button class="music-fab" id="musicFab" title="Toggle ambient music (M)">üéÆ</button>

<div class="container">
    <header>
        <h1>üéÆ Raya Games
            <span style="font-size:14px;background:linear-gradient(135deg,var(--primary),var(--purple));
                padding:4px 12px;border-radius:20px;vertical-align:middle;
                -webkit-text-fill-color:#fff;">v1.2.0</span>
        </h1>
        <p>Browser-based games & simulations with live sound. No downloads required.</p>
    </header>

    <div class="games-grid">

        <!-- Featured -->
        <div class="game-card featured">
            <span class="badge">‚≠ê Featured</span>
            <span class="game-icon">üåç</span>
            <h2>Life Simulator</h2>
            <p>The ultimate life simulation. Create people, guide them through careers, form relationships, commit crimes, and more. 40+ jobs, 80+ shop items, full persistence.</p>
            <div class="game-features">
                <span class="feature-tag">Simulation</span>
                <span class="feature-tag">Career System</span>
                <span class="feature-tag">Relationships</span>
                <span class="feature-tag">Crime</span>
                <span class="feature-tag">Save/Load</span>
            </div>
            <div class="btn-group">
                <a href="/life"   class="play-btn">‚ñ∂ Play</a>
                <a href="https://github.com/raya-ac/raya-games" class="play-btn secondary" target="_blank">üìÅ GitHub</a>
                <a href="https://github.com/raya-ac/raya-games/releases" class="play-btn secondary" target="_blank">üè∑Ô∏è Releases</a>
            </div>
        </div>

        <!-- GOL 3D -->
        <div class="game-card">
            <span class="game-icon">üé≤</span>
            <h2>Game of Life 3D</h2>
            <p>Cellular automaton in three dimensions. Watch life evolve in a voxel-based 3D environment with realistic WebGL rendering.</p>
            <div class="game-features">
                <span class="feature-tag">Cellular Automaton</span><span class="feature-tag">3D</span><span class="feature-tag">WebGL</span>
            </div>
            <div class="btn-group"><a href="/gol3d" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- GOL 4D -->
        <div class="game-card">
            <span class="game-icon">üßä</span>
            <h2>Game of Life 4D</h2>
            <p>Experience cellular automata in four dimensions. Watch hypercubes evolve as life spreads through 4D space.</p>
            <div class="game-features">
                <span class="feature-tag">Cellular Automaton</span><span class="feature-tag">4D</span><span class="feature-tag">Hypercube</span>
            </div>
            <div class="btn-group"><a href="/gol" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Life 2D -->
        <div class="game-card">
            <span class="game-icon">üî≤</span>
            <h2>Life 2D</h2>
            <p>Classic Conway's Game of Life with custom rule support. The original cellular automaton that started it all.</p>
            <div class="game-features">
                <span class="feature-tag">Cellular Automaton</span><span class="feature-tag">Classic</span><span class="feature-tag">Custom Rules</span>
            </div>
            <div class="btn-group"><a href="/life2d" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- War Simulation -->
        <div class="game-card">
            <span class="game-icon">‚öîÔ∏è</span>
            <h2>War Simulation</h2>
            <p>Multi-agent battle simulation with unit types, formations, and tactical AI. Watch armies clash in real-time.</p>
            <div class="game-features">
                <span class="feature-tag">Strategy</span><span class="feature-tag">AI</span><span class="feature-tag">Multi-agent</span>
            </div>
            <div class="btn-group"><a href="/war" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Particle System -->
        <div class="game-card">
            <span class="game-icon">‚ú®</span>
            <h2>Particle System</h2>
            <p>Interactive particle physics playground. Experiment with gravity, collisions, forces, and create beautiful visual effects.</p>
            <div class="game-features">
                <span class="feature-tag">Physics</span><span class="feature-tag">Particles</span><span class="feature-tag">Interactive</span>
            </div>
            <div class="btn-group"><a href="/particles" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Prison Tycoon -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#e94560,#c73e54);">NEW</span>
            <span class="game-icon">üè¢</span>
            <h2>Prison Empire Tycoon</h2>
            <p>Build and manage your own prison facility. Construct cells, hire staff, rehabilitate inmates, handle riots, and balance the budget.</p>
            <div class="game-features">
                <span class="feature-tag">Tycoon</span><span class="feature-tag">Management</span><span class="feature-tag">Staff System</span><span class="feature-tag">Random Events</span>
            </div>
            <div class="btn-group"><a href="/prison" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Ant Colony -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#22c55e,#16a34a);">NEW</span>
            <span class="game-icon">üêú</span>
            <h2>Ant Colony Simulator</h2>
            <p>Watch emergent behavior unfold as ant colonies build pheromone trails, gather food. Workers, soldiers, and scouts with nature ambient sounds.</p>
            <div class="game-features">
                <span class="feature-tag">Emergent Behavior</span><span class="feature-tag">Pheromone Trails</span><span class="feature-tag">üéµ Audio</span><span class="feature-tag">Day/Night</span>
            </div>
            <div class="btn-group"><a href="/ants" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Battle Royale -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#a855f7,#7c3aed);">NEW</span>
            <span class="game-icon">üî´</span>
            <h2>Battle Royale Simulator</h2>
            <p>100 AI agents fight to be the last one standing. Intelligent decision-making, loot system, storm circles, spectator mode, and replay system.</p>
            <div class="game-features">
                <span class="feature-tag">Battle Royale</span><span class="feature-tag">100 AI Agents</span><span class="feature-tag">Loot Tiers</span><span class="feature-tag">Replays</span>
            </div>
            <div class="btn-group"><a href="/br" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Medieval Wars -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#f59e0b,#d97706);">NEW</span>
            <span class="game-icon">üè∞</span>
            <h2>Medieval Kingdom Wars</h2>
            <p>Hex-based strategy with kingdom management, army recruitment, diplomacy, siege warfare, and hero units. Build your empire. Now with battle music!</p>
            <div class="game-features">
                <span class="feature-tag">Strategy</span><span class="feature-tag">Hex Grid</span><span class="feature-tag">Diplomacy</span><span class="feature-tag">üéµ Audio</span>
            </div>
            <div class="btn-group"><a href="/medieval" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Stock Market -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#22c55e,#16a34a);">NEW</span>
            <span class="game-icon">üìà</span>
            <h2>Stock Market Tycoon</h2>
            <p>Real-time trading simulation with 20 stocks, margin trading, short selling, market events, and portfolio tracking.</p>
            <div class="game-features">
                <span class="feature-tag">Trading</span><span class="feature-tag">Margin Trading</span><span class="feature-tag">Market Events</span><span class="feature-tag">Charts</span>
            </div>
            <div class="btn-group"><a href="/stocks" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Zombie -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#ef4444,#dc2626);">NEW</span>
            <span class="game-icon">üßü</span>
            <h2>Zombie Outbreak Simulator</h2>
            <p>Manage a zombie apocalypse with cellular automata infection spread, quarantine zones, vaccine research, and military escalation.</p>
            <div class="game-features">
                <span class="feature-tag">Apocalypse</span><span class="feature-tag">Quarantine</span><span class="feature-tag">Vaccine Research</span><span class="feature-tag">Survivors</span>
            </div>
            <div class="btn-group"><a href="/zombie" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Ecosystem -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#10b981,#059669);">NEW</span>
            <span class="game-icon">üåø</span>
            <h2>Ecosystem Simulator</h2>
            <p>Predator-prey dynamics with evolving species, food chains, climate changes, and natural disasters. Plants, herbivores, and apex predators.</p>
            <div class="game-features">
                <span class="feature-tag">Evolution</span><span class="feature-tag">Food Web</span><span class="feature-tag">Climate</span><span class="feature-tag">Genetics</span>
            </div>
            <div class="btn-group"><a href="/ecosystem" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Fluid -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#06b6d4,#0891b2);">NEW</span>
            <span class="game-icon">üíß</span>
            <h2>Fluid Dynamics Simulator</h2>
            <p>Real-time Navier-Stokes fluid simulation with water, oil, lava, smoke, and dyes. Color mixing, obstacles, gravity/wind controls, mini-games.</p>
            <div class="game-features">
                <span class="feature-tag">Physics</span><span class="feature-tag">Fluids</span><span class="feature-tag">Color Mixing</span><span class="feature-tag">Mini-Games</span>
            </div>
            <div class="btn-group"><a href="/fluid" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Neural Net -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#a855f7,#7c3aed);">NEW</span>
            <span class="game-icon">üß†</span>
            <h2>Neural Network Visualizer</h2>
            <p>Interactive AI training visualization. Build networks, train on datasets, watch weights update in real-time, draw to test activation heatmaps.</p>
            <div class="game-features">
                <span class="feature-tag">AI</span><span class="feature-tag">Machine Learning</span><span class="feature-tag">Interactive</span><span class="feature-tag">Visualization</span>
            </div>
            <div class="btn-group"><a href="/neural" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Traffic -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#f97316,#ea580c);">NEW</span>
            <span class="game-icon">üöó</span>
            <h2>Traffic Simulator</h2>
            <p>Build road networks, place traffic lights, manage rush-hour congestion. AI vehicles, public transport, accidents, and real-time metrics. City ambient sounds!</p>
            <div class="game-features">
                <span class="feature-tag">City Builder</span><span class="feature-tag">Traffic AI</span><span class="feature-tag">üéµ Audio</span><span class="feature-tag">Day/Night</span>
            </div>
            <div class="btn-group"><a href="/traffic" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- City Builder -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#3b82f6,#2563eb);">NEW</span>
            <span class="game-icon">üèôÔ∏è</span>
            <h2>City Builder</h2>
            <p>Build your dream city with zoning, roads, power, and water. Manage citizen happiness, budget, and disasters.</p>
            <div class="game-features">
                <span class="feature-tag">City Building</span><span class="feature-tag">Zoning</span><span class="feature-tag">Economy</span><span class="feature-tag">Disasters</span>
            </div>
            <div class="btn-group"><a href="/city" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Boids -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#ec4899,#db2777);">NEW</span>
            <span class="game-icon">üê¶</span>
            <h2>Boids Flocking</h2>
            <p>Craig Reynolds' classic flocking algorithm. Spawn birds, fish, or fireflies with separation, alignment, and cohesion. Add predators!</p>
            <div class="game-features">
                <span class="feature-tag">AI</span><span class="feature-tag">Swarm</span><span class="feature-tag">Interactive</span><span class="feature-tag">Beautiful</span>
            </div>
            <div class="btn-group"><a href="/boids" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Disease -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#22c55e,#16a34a);">NEW</span>
            <span class="game-icon">ü¶†</span>
            <h2>Disease Simulator</h2>
            <p>Plague Inc-style outbreak simulator. Evolve your disease, spread across the world map, avoid cure research. 30+ traits, 4 disease types.</p>
            <div class="game-features">
                <span class="feature-tag">Strategy</span><span class="feature-tag">Evolution</span><span class="feature-tag">World Map</span><span class="feature-tag">Plague Inc</span>
            </div>
            <div class="btn-group"><a href="/disease" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Space Colony -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#8b5cf6,#7c3aed);">NEW</span>
            <span class="game-icon">üöÄ</span>
            <h2>Space Colony</h2>
            <p>Manage a Mars base colony. Build habitats, greenhouses, research labs. Keep colonists alive with oxygen, water, food. Trade with Earth.</p>
            <div class="game-features">
                <span class="feature-tag">Space</span><span class="feature-tag">Colony Sim</span><span class="feature-tag">Research</span><span class="feature-tag">Trade</span>
            </div>
            <div class="btn-group"><a href="/space" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Falling Sand -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#fbbf24,#f59e0b);">NEW</span>
            <span class="game-icon">üíé</span>
            <h2>Falling Sand</h2>
            <p>Physics sandbox with 16 elements ‚Äî sand, water, fire, acid, lava, TNT and more. Element interaction sounds, ambient music, keyboard shortcuts!</p>
            <div class="game-features">
                <span class="feature-tag">Physics</span><span class="feature-tag">Sandbox</span><span class="feature-tag">üéµ Audio</span><span class="feature-tag">16 Elements</span>
            </div>
            <div class="btn-group"><a href="/sand" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Snake AI -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#22c55e,#16a34a);">NEW</span>
            <span class="game-icon">üêç</span>
            <h2>Snake AI</h2>
            <p>Watch AI algorithms play Snake perfectly ‚Äî BFS, A*, or Hamiltonian cycle pathfinding. Compare their strategies in real-time.</p>
            <div class="game-features">
                <span class="feature-tag">AI</span><span class="feature-tag">Pathfinding</span><span class="feature-tag">Algorithms</span><span class="feature-tag">Classic</span>
            </div>
            <div class="btn-group"><a href="/snake" class="play-btn">‚ñ∂ Play</a></div>
        </div>

        <!-- Maze -->
        <div class="game-card">
            <span class="badge badge-new" style="background:linear-gradient(135deg,#a855f7,#22d3ee);">NEW</span>
            <span class="game-icon">üåÄ</span>
            <h2>Maze Generator</h2>
            <p>Generate mazes with 4 algorithms and watch 4 solvers find the path. Recursive Backtracker, Prim's, Kruskal's, Eller's. Educational!</p>
            <div class="game-features">
                <span class="feature-tag">Algorithms</span><span class="feature-tag">Generator</span><span class="feature-tag">Visualization</span><span class="feature-tag">Educational</span>
            </div>
            <div class="btn-group"><a href="/maze" class="play-btn">‚ñ∂ Play</a></div>
        </div>

    </div>

    <footer>
        <p>Made with ‚ù§Ô∏è by <a href="https://raya.li" target="_blank">raya</a></p>
        <p style="margin-top:8px;font-size:13px;">
            <a href="https://github.com/raya-ac/raya-games" target="_blank">View on GitHub</a> ¬∑
            <a href="https://github.com/raya-ac/raya-games/releases" target="_blank">Releases</a>
        </p>
    </footer>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  STARFIELD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
(function() {
    const cv = document.getElementById('starfield');
    const cx = cv.getContext('2d');
    let stars = [];
    function initStars() {
        cv.width = window.innerWidth; cv.height = window.innerHeight;
        stars = Array.from({length:160}, () => ({
            x: Math.random()*cv.width,
            y: Math.random()*cv.height,
            r: Math.random()*1.5+.3,
            spd: Math.random()*.15+.05,
            op: Math.random()*.7+.1,
            flicker: Math.random()*Math.PI*2
        }));
    }
    function drawStars(t) {
        cx.clearRect(0,0,cv.width,cv.height);
        stars.forEach(s => {
            const op = s.op * (.7 + .3*Math.sin(t*.001 + s.flicker));
            cx.beginPath();
            cx.arc(s.x, s.y, s.r, 0, Math.PI*2);
            cx.fillStyle = `rgba(255,255,255,${op})`;
            cx.fill();
            s.y += s.spd;
            if (s.y > cv.height) { s.y=0; s.x=Math.random()*cv.width; }
        });
        requestAnimationFrame(drawStars);
    }
    window.addEventListener('resize', initStars);
    initStars();
    requestAnimationFrame(drawStars);
})();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  PORTAL AUDIO ENGINE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const Audio = (() => {
    let actx, master, musicOn = false, nodes = [];

    function init() {
        if (actx) return;
        actx = new (window.AudioContext || window.webkitAudioContext)();
        master = actx.createGain();
        master.gain.value = 0.18;
        const comp = actx.createDynamicsCompressor();
        comp.threshold.value = -20; comp.ratio.value = 4;
        master.connect(comp); comp.connect(actx.destination);
    }

    function osc(type, freq, gain, dur, startF, endF) {
        if (!actx) return;
        const now = actx.currentTime;
        const o = actx.createOscillator();
        const g = actx.createGain();
        o.type = type;
        if (startF) { o.frequency.setValueAtTime(startF,now); o.frequency.exponentialRampToValueAtTime(endF,now+dur); }
        else o.frequency.value = freq;
        g.gain.setValueAtTime(0,now);
        g.gain.linearRampToValueAtTime(gain,now+.01);
        g.gain.exponentialRampToValueAtTime(.0001,now+dur);
        o.connect(g); g.connect(master);
        o.start(now); o.stop(now+dur+.05);
    }

    // Click/hover sound ‚Äî soft chime
    function hover() {
        init();
        osc('sine', 0, .035, .18, 1200, 900);
    }
    function click() {
        init();
        osc('sine', 0, .06, .12, 800, 1400);
        setTimeout(() => osc('sine',0,.04,.1,1400,1000), 40);
    }

    // Ambient portal music ‚Äî slow arpeggios over a pad drone
    let beatT = 0, beatStep = 0, beatHandle = null;
    const NOTES = [130.81,146.83,164.81,174.61,196,220,246.94,261.63]; // C3 major pentatonic

    function startAmbient() {
        if (!actx) return;
        // pad drone
        [65.41, 98, 130.81, 196].forEach((f,i) => {
            const o = actx.createOscillator();
            const g = actx.createGain();
            const flt = actx.createBiquadFilter();
            o.type = 'sawtooth'; o.frequency.value = f + i*.3;
            flt.type = 'lowpass'; flt.frequency.value = 800; flt.Q.value = 1.5;
            g.gain.value = 0;
            g.gain.linearRampToValueAtTime(.06, actx.currentTime+3);
            o.connect(flt); flt.connect(g); g.connect(master);
            o.start();
            nodes.push({o,g,flt});
        });
        // arpeggio scheduler
        beatT = actx.currentTime + .5;
        scheduleBeat();
    }

    function scheduleBeat() {
        if (!musicOn) return;
        const bpm = 80, beat = 60/bpm;
        const window = .3;
        const now = actx.currentTime;
        while (beatT < now + window) {
            const note = NOTES[beatStep % NOTES.length];
            // high arp note
            const o = actx.createOscillator();
            const g = actx.createGain();
            o.type = 'triangle'; o.frequency.value = note;
            g.gain.setValueAtTime(0, beatT);
            g.gain.linearRampToValueAtTime(.04, beatT+.01);
            g.gain.exponentialRampToValueAtTime(.0001, beatT+.35);
            o.connect(g); g.connect(master);
            o.start(beatT); o.stop(beatT+.4);
            // subtle 5th
            if (beatStep % 4 === 0) {
                const o2 = actx.createOscillator();
                const g2 = actx.createGain();
                o2.type = 'sine'; o2.frequency.value = note * 1.5;
                g2.gain.setValueAtTime(0,beatT);
                g2.gain.linearRampToValueAtTime(.025,beatT+.02);
                g2.gain.exponentialRampToValueAtTime(.0001,beatT+.6);
                o2.connect(g2); g2.connect(master);
                o2.start(beatT); o2.stop(beatT+.65);
            }
            beatT += beat;
            beatStep++;
        }
        beatHandle = setTimeout(scheduleBeat, 100);
    }

    function stopAmbient() {
        clearTimeout(beatHandle); beatHandle = null;
        nodes.forEach(({o,g}) => {
            g.gain.cancelScheduledValues(actx.currentTime);
            g.gain.linearRampToValueAtTime(0, actx.currentTime+1.5);
            try { o.stop(actx.currentTime+1.6); } catch(e) {}
        });
        nodes = [];
    }

    function toggle() {
        init();
        musicOn = !musicOn;
        if (musicOn) startAmbient(); else stopAmbient();
        return musicOn;
    }

    return { hover, click, toggle, get on(){ return musicOn; } };
})();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  UI WIRING
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// Hover sounds on cards
document.querySelectorAll('.game-card').forEach(card => {
    card.addEventListener('mouseenter', () => Audio.hover());
});
// Click sounds on play buttons
document.querySelectorAll('.play-btn').forEach(btn => {
    btn.addEventListener('click', () => Audio.click());
});

// Music FAB
const fab = document.getElementById('musicFab');
fab.addEventListener('click', () => {
    const on = Audio.toggle();
    fab.textContent = on ? 'üîä' : 'üéÆ';
    fab.classList.toggle('active', on);
    fab.title = on ? 'Music On (click to stop)' : 'Toggle ambient music (M)';
});

// Keyboard shortcut M
document.addEventListener('keydown', e => {
    if (e.key === 'm' || e.key === 'M') fab.click();
});

// Subtle card entrance animation with IntersectionObserver
const observer = new IntersectionObserver(entries => {
    entries.forEach(e => {
        if (e.isIntersecting) {
            e.target.style.animation = 'fadeUp .4s ease both';
            observer.unobserve(e.target);
        }
    });
}, { threshold: 0.1 });

const style = document.createElement('style');
style.textContent = `@keyframes fadeUp{from{opacity:0;transform:translateY(24px)}to{opacity:1;transform:none}}`;
document.head.appendChild(style);

document.querySelectorAll('.game-card').forEach((c,i) => {
    c.style.animationDelay = `${i * 40}ms`;
    observer.observe(c);
});
</script>
</body>
</html>
