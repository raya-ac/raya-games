<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prison Empire Tycoon - Enhanced Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(90deg, #0f0f1a 0%, #1a1a2e 100%);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #e94560;
            box-shadow: 0 4px 20px rgba(233, 69, 96, 0.3);
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(90deg, #e94560, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(233, 69, 96, 0.5);
        }

        .header-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .save-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(16, 185, 129, 0.4);
        }

        .load-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .load-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }

        .newgame-btn {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .newgame-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(239, 68, 68, 0.4);
        }

        .back-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        /* Music Controls */
        .music-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(233, 69, 96, 0.15);
            border: 1px solid rgba(233, 69, 96, 0.3);
            border-radius: 10px;
            padding: 8px 12px;
        }

        .music-toggle {
            background: linear-gradient(135deg, #e94560 0%, #c73e54 100%);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(233, 69, 96, 0.4);
        }

        .music-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.5);
        }

        .music-toggle.muted {
            background: linear-gradient(135deg, #4b5563 0%, #374151 100%);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .volume-slider {
            width: 80px;
            height: 6px;
            border-radius: 3px;
            background: rgba(255,255,255,0.2);
            outline: none;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #e94560;
            cursor: pointer;
            box-shadow: 0 0 8px rgba(233, 69, 96, 0.5);
        }

        .music-label {
            font-size: 12px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Alert Banner for Riots */
        .alert-banner {
            display: none;
            background: linear-gradient(90deg, #dc2626, #ef4444);
            padding: 12px 30px;
            text-align: center;
            font-weight: bold;
            animation: pulse 1s infinite;
        }

        .alert-banner.active {
            display: block;
        }

        /* Stats Bar */
        .stats-bar {
            background: rgba(15, 15, 26, 0.9);
            padding: 15px 30px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            border-bottom: 1px solid rgba(233, 69, 96, 0.3);
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .stat-icon { font-size: 24px; }
        .stat-value { font-size: 20px; font-weight: bold; color: #fff; }
        .stat-label { font-size: 12px; color: #888; text-transform: uppercase; }

        .stat-item.money { border-left: 3px solid #4ade80; }
        .stat-item.inmates { border-left: 3px solid #f472b6; }
        .stat-item.staff { border-left: 3px solid #60a5fa; }
        .stat-item.security { border-left: 3px solid #fbbf24; }
        .stat-item.reputation { border-left: 3px solid #a78bfa; }
        .stat-item.day { border-left: 3px solid #34d399; }
        .stat-item.unrest { border-left: 3px solid #ef4444; }

        /* Main Container */
        .container {
            display: grid;
            grid-template-columns: 260px 1fr 300px;
            gap: 20px;
            padding: 20px;
            max-width: 1700px;
            margin: 0 auto;
        }

        .left-panel, .right-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-height: 0;
        }

        /* Panels */
        .panel {
            background: rgba(15, 15, 26, 0.8);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .panel-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e94560;
            color: #fff;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .nav-tab {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            color: #e0e0e0;
            padding: 12px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }

        .nav-tab:hover {
            background: rgba(233, 69, 96, 0.2);
            border-color: #e94560;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #e94560 0%, #c73e54 100%);
            border-color: #e94560;
            color: white;
        }

        /* Content Area */
        .content-area { min-height: 600px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .shake { animation: shake 0.5s ease; }

        /* Building Grid */
        .building-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .building-card {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .building-card:hover {
            transform: translateY(-5px);
            border-color: #e94560;
            box-shadow: 0 10px 30px rgba(233, 69, 96, 0.2);
        }

        .building-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .building-icon { font-size: 36px; margin-bottom: 8px; }
        .building-name { font-weight: bold; margin-bottom: 5px; font-size: 14px; }
        .building-count { color: #e94560; font-size: 13px; }
        .building-cost { font-size: 12px; color: #4ade80; margin-top: 5px; }
        .building-unlock { font-size: 11px; color: #fbbf24; margin-top: 5px; }

        /* Buttons */
        .btn {
            background: linear-gradient(135deg, #e94560 0%, #c73e54 100%);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 3px;
            font-size: 13px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(233, 69, 96, 0.4);
        }

        .btn.secondary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .btn.success { background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%); }
        .btn.danger { background: linear-gradient(135deg, #f87171 0%, #ef4444 100%); }
        .btn.warning { background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); color: #000; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .btn.small { padding: 6px 12px; font-size: 12px; }

        /* Staff Cards */
        .staff-list { display: grid; gap: 10px; }
        .staff-card {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .staff-info { display: flex; align-items: center; gap: 15px; }
        .staff-icon { font-size: 30px; }
        .staff-details h4 { margin-bottom: 5px; }
        .staff-details p { font-size: 12px; color: #888; }
        .staff-salary { color: #4ade80; font-weight: bold; margin-right: 10px; }
        .staff-controls { display: flex; gap: 5px; align-items: center; }

        /* Skill Stars */
        .skill-stars { color: #fbbf24; font-size: 12px; margin-top: 3px; }

        /* Inmate List */
        .inmate-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .inmate-item:hover { border-color: rgba(233, 69, 96, 0.3); }

        .inmate-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .inmate-name { font-weight: bold; font-size: 16px; }
        .inmate-traits { display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px; }

        .trait-badge {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 12px;
            font-weight: 600;
        }

        .trait-violent { background: rgba(239, 68, 68, 0.3); color: #fca5a5; }
        .trait-smart { background: rgba(59, 130, 246, 0.3); color: #93c5fd; }
        .trait-addict { background: rgba(168, 85, 247, 0.3); color: #d8b4fe; }
        .trait-gang { background: rgba(245, 158, 11, 0.3); color: #fcd34d; }
        .trait-snitch { background: rgba(34, 197, 94, 0.3); color: #86efac; }
        .trait-loyal { background: rgba(14, 165, 233, 0.3); color: #7dd3fc; }
        .trait-psychopath { background: rgba(220, 38, 38, 0.3); color: #fecaca; }
        .trait-innocent { background: rgba(250, 204, 21, 0.3); color: #fef08a; }

        .inmate-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            font-size: 12px;
            margin-top: 10px;
        }

        .inmate-stat {
            background: rgba(0,0,0,0.2);
            padding: 8px;
            border-radius: 6px;
            text-align: center;
        }

        .inmate-stat-label { color: #888; font-size: 10px; }
        .inmate-stat-value { font-weight: bold; margin-top: 3px; }

        .inmate-risk {
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 11px;
            font-weight: bold;
        }

        .risk-low { background: rgba(74, 222, 128, 0.2); color: #4ade80; }
        .risk-medium { background: rgba(251, 191, 36, 0.2); color: #fbbf24; }
        .risk-high { background: rgba(248, 113, 113, 0.2); color: #f87171; }
        .risk-death { background: rgba(220, 38, 38, 0.3); color: #fecaca; }

        .inmate-actions {
            display: flex;
            gap: 5px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        /* Progress Bars */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-fill.health { background: linear-gradient(90deg, #f87171, #ef4444); }
        .progress-fill.happiness { background: linear-gradient(90deg, #fbbf24, #f59e0b); }
        .progress-fill.rehab { background: linear-gradient(90deg, #4ade80, #22c55e); }
        .progress-fill.unrest { background: linear-gradient(90deg, #ef4444, #dc2626); }
        .progress-fill.education { background: linear-gradient(90deg, #3b82f6, #2563eb); }

        /* Policy Sliders */
        .policy-item {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
        }

        .policy-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .policy-label { font-weight: bold; }
        .policy-value { color: #e94560; }

        .policy-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: rgba(255,255,255,0.1);
            outline: none;
            -webkit-appearance: none;
        }

        .policy-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #e94560;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(233, 69, 96, 0.5);
        }

        .policy-description {
            font-size: 12px;
            color: #888;
            margin-top: 8px;
        }

        /* Event Log */
        .event-log {
            max-height: 350px;
            overflow-y: auto;
        }

        .event-item {
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 3px solid;
            background: rgba(255,255,255,0.05);
            font-size: 13px;
        }

        .event-item.info { border-left-color: #60a5fa; }
        .event-item.warning { border-left-color: #fbbf24; }
        .event-item.danger { border-left-color: #f87171; }
        .event-item.success { border-left-color: #4ade80; }
        .event-time { font-size: 11px; color: #666; margin-bottom: 5px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-overlay.active { display: flex; }

        .modal {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            border: 2px solid #e94560;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-title { font-size: 24px; margin-bottom: 20px; color: #e94560; }
        .modal-content { margin-bottom: 20px; line-height: 1.6; }
        .modal-actions { display: flex; gap: 10px; justify-content: flex-end; flex-wrap: wrap; }

        /* Notification */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .notification.show { transform: translateX(0); }
        .notification.success { background: linear-gradient(135deg, #4ade80, #22c55e); }
        .notification.error { background: linear-gradient(135deg, #f87171, #ef4444); }
        .notification.warning { background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #000; }
        .notification.riot { background: linear-gradient(135deg, #dc2626, #991b1b); animation: pulse 0.5s infinite; }

        /* Prison Map */
        .prison-map {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 5px;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .map-cell {
            aspect-ratio: 1;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .map-cell.cell { background: rgba(233, 69, 96, 0.3); border-color: #e94560; }
        .map-cell.min-cell { background: rgba(74, 222, 128, 0.3); border-color: #4ade80; }
        .map-cell.death { background: rgba(220, 38, 38, 0.4); border-color: #dc2626; }
        .map-cell.women { background: rgba(236, 72, 153, 0.3); border-color: #ec4899; }

        /* Unrest Meter */
        .unrest-meter {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .unrest-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .unrest-label { font-weight: bold; }
        .unrest-value { font-weight: bold; }

        .unrest-level-calm { color: #4ade80; }
        .unrest-level-uneasy { color: #fbbf24; }
        .unrest-level-tense { color: #f97316; }
        .unrest-level-dangerous { color: #ef4444; }
        .unrest-level-riot { color: #dc2626; animation: pulse 1s infinite; }

        /* Riot Panel */
        .riot-panel {
            display: none;
            background: linear-gradient(135deg, rgba(220,38,38,0.3), rgba(153,27,27,0.3));
            border: 2px solid #dc2626;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .riot-panel.active { display: block; }

        /* Program Cards */
        .program-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .program-card {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .program-card:hover {
            border-color: #4ade80;
            transform: translateY(-3px);
        }

        .program-card.active {
            border-color: #4ade80;
            background: rgba(74, 222, 128, 0.1);
        }

        .program-icon { font-size: 32px; margin-bottom: 10px; }
        .program-name { font-weight: bold; margin-bottom: 5px; }
        .program-desc { font-size: 12px; color: #888; margin-bottom: 10px; }
        .program-cost { color: #4ade80; font-size: 13px; }

        /* Contraband Panel */
        .contraband-panel {
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .contraband-types {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .contraband-item {
            background: rgba(0,0,0,0.2);
            padding: 10px 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(0,0,0,0.2); }
        ::-webkit-scrollbar-thumb { background: #e94560; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #c73e54; }

        /* Responsive */
        @media (max-width: 1400px) {
            .container { grid-template-columns: 220px 1fr; }
            .right-panel { display: none; }
        }

        @media (max-width: 768px) {
            .container { grid-template-columns: 1fr; }
            .left-panel { display: none; }
        }

        /* Two column layout helpers */
        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .section-box {
            background: rgba(255,255,255,0.03);
            border-radius: 10px;
            padding: 15px;
        }

        .section-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #e94560;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">üèõÔ∏è Prison Empire Tycoon</div>
        <div class="header-actions">
            <div class="music-controls" id="music-controls">
                <button class="music-toggle" id="music-toggle" onclick="musicSystem.toggle()" title="Click to start music">
                    üéµ
                </button>
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <span class="music-label">Music</span>
                    <input type="range" class="volume-slider" id="volume-slider" min="0" max="100" value="15" oninput="musicSystem.setVolume(this.value)">
                </div>
            </div>
            <button class="save-btn" onclick="game.saveGame()">üíæ Save</button>
            <button class="load-btn" onclick="game.loadGame()">üìÇ Load</button>
            <button class="newgame-btn" onclick="game.newGame()">üîÑ New</button>
            <a href="/games" class="back-btn">üéÆ Games</a>
        </div>
    </header>

    <!-- Alert Banner for Riots -->
    <div class="alert-banner" id="riot-alert">
        üö® RIOT IN PROGRESS! PRISONERS ARE REBELLING! üö®
    </div>

    <!-- Stats Bar -->
    <div class="stats-bar">
        <div class="stat-item money">
            <span class="stat-icon">üí∞</span>
            <div>
                <div class="stat-value" id="money">$50,000</div>
                <div class="stat-label">Funds</div>
            </div>
        </div>
        <div class="stat-item inmates">
            <span class="stat-icon">üë•</span>
            <div>
                <div class="stat-value"><span id="inmate-count">0</span> / <span id="capacity">20</span></div>
                <div class="stat-label">Inmates</div>
            </div>
        </div>
        <div class="stat-item staff">
            <span class="stat-icon">üëÆ</span>
            <div>
                <div class="stat-value" id="staff-count">0</div>
                <div class="stat-label">Staff</div>
            </div>
        </div>
        <div class="stat-item security">
            <span class="stat-icon">üõ°Ô∏è</span>
            <div>
                <div class="stat-value" id="security-level">Low</div>
                <div class="stat-label">Security</div>
            </div>
        </div>
        <div class="stat-item reputation">
            <span class="stat-icon">‚≠ê</span>
            <div>
                <div class="stat-value" id="reputation">50%</div>
                <div class="stat-label">Reputation</div>
            </div>
        </div>
        <div class="stat-item unrest">
            <span class="stat-icon">üî•</span>
            <div>
                <div class="stat-value" id="unrest-level">Calm</div>
                <div class="stat-label">Unrest</div>
            </div>
        </div>
        <div class="stat-item day">
            <span class="stat-icon">üìÖ</span>
            <div>
                <div class="stat-value" id="day">1</div>
                <div class="stat-label">Day</div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Left Panel - Navigation -->
        <div class="left-panel">
            <div class="panel">
                <div class="panel-title">üìã Menu</div>
                <div class="nav-tabs">
                    <div class="nav-tab active" data-tab="overview"><span>üèõÔ∏è</span> Overview</div>
                    <div class="nav-tab" data-tab="buildings"><span>üèóÔ∏è</span> Buildings</div>
                    <div class="nav-tab" data-tab="staff"><span>üëÆ</span> Staff</div>
                    <div class="nav-tab" data-tab="inmates"><span>üë•</span> Inmates</div>
                    <div class="nav-tab" data-tab="programs"><span>üìö</span> Rehabilitation</div>
                    <div class="nav-tab" data-tab="parole"><span>üìù</span> Parole & Appeals</div>
                    <div class="nav-tab" data-tab="security"><span>üîí</span> Security</div>
                    <div class="nav-tab" data-tab="policies"><span>üìú</span> Policies</div>
                    <div class="nav-tab" data-tab="finance"><span>üíµ</span> Finance</div>
                    <div class="nav-tab" data-tab="settings"><span>‚öôÔ∏è</span> Settings</div>
                </div>
            </div>
            <div class="panel" style="flex: 1; display: flex; flex-direction: column; min-height: 0;">
                <div class="panel-title">üì∞ Event Log</div>
                <div class="event-log" id="event-log" style="flex: 1;">
                    <div class="event-item info">
                        <div class="event-time">Day 1 - Morning</div>
                        <div>Prison facility established. Welcome, Warden!</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Center Panel - Content -->
        <div class="panel content-area">
            <!-- Overview Tab -->
            <div class="tab-content active" id="overview">
                <div class="panel-title">üèõÔ∏è Prison Overview</div>
                
                <!-- Unrest Meter -->
                <div class="unrest-meter">
                    <div class="unrest-header">
                        <span class="unrest-label">üî• Prisoner Unrest Level</span>
                        <span class="unrest-value" id="unrest-text">Calm</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill unrest" id="unrest-bar" style="width: 0%"></div>
                    </div>
                    <p style="font-size: 12px; color: #888; margin-top: 8px;">
                        High unrest leads to riots, violence, and escapes. Keep prisoners happy with good conditions and programs.
                    </p>
                </div>

                <!-- Riot Panel -->
                <div class="riot-panel" id="riot-panel">
                    <h3 style="color: #dc2626; margin-bottom: 15px;">üö® RIOT IN PROGRESS!</h3>
                    <p>Prisoners are rioting! Take immediate action to suppress the riot.</p>
                    <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn danger" onclick="game.suppressRiot('guards')">
                            üëÆ Deploy Riot Guards (-$5,000)
                        </button>
                        <button class="btn warning" onclick="game.suppressRiot('negotiate')">
                            üó£Ô∏è Negotiate (Risky)
                        </button>
                        <button class="btn" onclick="game.suppressRiot('lockdown')">
                            üîí Lockdown All Wings
                        </button>
                    </div>
                    <div id="riot-status" style="margin-top: 15px; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px;">
                        <strong>Riot Duration:</strong> <span id="riot-duration">0</span> hours<br>
                        <strong>Damage So Far:</strong> $<span id="riot-damage">0</span>
                    </div>
                </div>

                <div class="prison-map" id="prison-map"></div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px;">
                        <h4 style="color: #e94560; margin-bottom: 15px;">üèóÔ∏è Buildings</h4>
                        <div id="overview-buildings" style="display: grid; gap: 8px;"></div>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px;">
                        <h4 style="color: #e94560; margin-bottom: 15px;">üëÆ Staff Overview</h4>
                        <div id="overview-staff" style="display: grid; gap: 8px;"></div>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px;">
                        <h4 style="color: #e94560; margin-bottom: 15px;">üìä Status Summary</h4>
                        <div style="display: grid; gap: 8px;">
                            <div style="display: flex; justify-content: space-between;">
                                <span>Security Level:</span>
                                <span id="overview-security">Medium</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>Food Quality:</span>
                                <span id="overview-food">Standard</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>Cell Quality:</span>
                                <span id="overview-cell-quality">Basic</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>Active Programs:</span>
                                <span id="overview-programs">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Buildings Tab -->
            <div class="tab-content" id="buildings">
                <div class="panel-title">üèóÔ∏è Build Facilities</div>
                <div class="building-grid" id="building-grid">
                    <!-- Generated by JS -->
                </div>
                
                <div style="margin-top: 30px;">
                    <div class="panel-title">üîì Expansion Areas</div>
                    <div class="building-grid" id="expansion-grid">
                        <!-- Generated by JS -->
                    </div>
                </div>
            </div>

            <!-- Staff Tab -->
            <div class="tab-content" id="staff">
                <div class="panel-title">üëÆ Staff Management</div>
                <p style="color: #888; margin-bottom: 15px; font-size: 13px;">
                    Hire staff with different skill levels. Higher skilled staff are more effective but cost more.
                </p>
                <div class="staff-list" id="staff-list">
                    <!-- Generated by JS -->
                </div>
                <div style="margin-top: 20px;">
                    <h4 style="margin-bottom: 10px;">Current Staff</h4>
                    <div id="current-staff">
                        <p style="color: #888;">No staff hired yet.</p>
                    </div>
                </div>
            </div>

            <!-- Inmates Tab -->
            <div class="tab-content" id="inmates">
                <div class="panel-title">üë• Inmate Management</div>
                
                <div class="contraband-panel">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <div>
                            <strong>üïµÔ∏è Contraband Situation</strong>
                            <p style="font-size: 12px; color: #888; margin-top: 5px;">
                                Conduct searches to find contraband. Punish offenders to maintain order.
                            </p>
                        </div>
                        <button class="btn warning" onclick="game.conductSearch()">
                            üîç Conduct Search (-$500)
                        </button>
                    </div>
                    <div class="contraband-types">
                        <div class="contraband-item">
                            <span>üî™</span> <span id="contraband-weapons">0</span> Weapons
                        </div>
                        <div class="contraband-item">
                            <span>üíä</span> <span id="contraband-drugs">0</span> Drugs
                        </div>
                        <div class="contraband-item">
                            <span>üì±</span> <span id="contraband-phones">0</span> Phones
                        </div>
                        <div class="contraband-item">
                            <span>üçæ</span> <span id="contraband-alcohol">0</span> Alcohol
                        </div>
                    </div>
                </div>
                
                <div id="inmate-list">
                    <p style="color: #888; text-align: center; padding: 40px;">No inmates yet. Accept intake from the Overview tab.</p>
                </div>
            </div>

            <!-- Programs Tab -->
            <div class="tab-content" id="programs">
                <div class="panel-title">üìö Rehabilitation Programs</div>
                <p style="color: #888; margin-bottom: 15px; font-size: 13px;">
                    Enroll inmates in programs to reduce recidivism and improve parole outcomes. Each program costs money to run daily.
                </p>
                <div class="program-grid" id="program-grid">
                    <!-- Generated by JS -->
                </div>
                
                <div style="margin-top: 30px;">
                    <div class="panel-title">üìä Program Statistics</div>
                    <div class="two-col">
                        <div class="section-box">
                            <div class="section-title">Active Enrollments</div>
                            <div id="program-enrollments">
                                <p style="color: #888; font-size: 13px;">No active enrollments</p>
                            </div>
                        </div>
                        <div class="section-box">
                            <div class="section-title">Graduates This Year</div>
                            <div id="program-graduates">
                                <p style="color: #888; font-size: 13px;">No graduates yet</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Parole & Appeals Tab -->
            <div class="tab-content" id="parole">
                <div class="panel-title">üìù Parole & Appeals System</div>
                
                <div class="two-col">
                    <div class="section-box">
                        <div class="section-title">üìã Parole Board</div>
                        <p style="font-size: 12px; color: #888; margin-bottom: 15px;">
                            Review inmates for early release based on behavior and rehabilitation progress.
                        </p>
                        <div id="parole-queue">
                            <p style="color: #888;">No parole applications pending</p>
                        </div>
                    </div>
                    
                    <div class="section-box">
                        <div class="section-title">‚öñÔ∏è Appeals Board</div>
                        <p style="font-size: 12px; color: #888; margin-bottom: 15px;">
                            Review appeals from inmates claiming wrongful conviction. Some may be innocent!
                        </p>
                        <div id="appeals-queue">
                            <p style="color: #888;">No appeals pending</p>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 20px;" class="section-box">
                    <div class="section-title">üìà Parole Statistics</div>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; text-align: center;">
                        <div>
                            <div style="font-size: 24px; font-weight: bold; color: #4ade80;" id="parole-approved">0</div>
                            <div style="font-size: 12px; color: #888;">Paroles Granted</div>
                        </div>
                        <div>
                            <div style="font-size: 24px; font-weight: bold; color: #ef4444;" id="parole-denied">0</div>
                            <div style="font-size: 12px; color: #888;">Paroles Denied</div>
                        </div>
                        <div>
                            <div style="font-size: 24px; font-weight: bold; color: #4ade80;" id="appeals-upheld">0</div>
                            <div style="font-size: 12px; color: #888;">Appeals Upheld</div>
                        </div>
                        <div>
                            <div style="font-size: 24px; font-weight: bold; color: #a78bfa;" id="wrongful-released">0</div>
                            <div style="font-size: 12px; color: #888;">Wrongful Convictions</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Tab -->
            <div class="tab-content" id="security">
                <div class="panel-title">üîí Security Operations</div>
                
                <div class="section-box" style="margin-bottom: 20px;">
                    <div class="section-title">üïµÔ∏è Contraband Control</div>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;">
                        <button class="btn" onclick="game.conductSearch('random')">
                            üîç Random Cell Search (-$500)
                        </button>
                        <button class="btn secondary" onclick="game.conductSearch('full')">
                            üîí Full Lockdown Search (-$2,000)
                        </button>
                        <button class="btn warning" onclick="game.installScanner()">
                            üì° Install Body Scanner (-$10,000)
                        </button>
                    </div>
                    <p style="font-size: 12px; color: #888; margin-top: 10px;">
                        Searches find contraband but lower inmate happiness. Scanners reduce smuggling over time.
                    </p>
                </div>
                
                <div class="section-box" style="margin-bottom: 20px;">
                    <div class="section-title">üö® Riot Control</div>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;">
                        <button class="btn" onclick="game.deployRiotSquad()">
                            üëÆ Deploy Riot Squad (-$3,000)
                        </button>
                        <button class="btn secondary" onclick="game.increasePatrols()">
                            üö∂ Increase Patrols (-$500/day)
                        </button>
                    </div>
                    <div style="margin-top: 15px; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px;">
                        <strong>Riot Risk Factors:</strong>
                        <ul style="font-size: 12px; color: #888; margin-top: 8px; margin-left: 20px;">
                            <li>Overcrowding increases unrest rapidly</li>
                            <li>Low food quality causes dissatisfaction</li>
                            <li>Too many violent inmates without guards</li>
                            <li>Gang members increase tension</li>
                            <li>Addicts without access to programs</li>
                        </ul>
                    </div>
                </div>
                
                <div class="section-box">
                    <div class="section-title">üìä Security Overview</div>
                    <div id="security-overview" style="margin-top: 10px;">
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: rgba(255,255,255,0.03); border-radius: 5px; margin-bottom: 8px;">
                            <span>Guard to Inmate Ratio:</span>
                            <span id="guard-ratio">0:0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: rgba(255,255,255,0.03); border-radius: 5px; margin-bottom: 8px;">
                            <span>High Risk Inmates:</span>
                            <span id="high-risk-count">0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: rgba(255,255,255,0.03); border-radius: 5px; margin-bottom: 8px;">
                            <span>Known Gang Members:</span>
                            <span id="gang-count">0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: rgba(255,255,255,0.03); border-radius: 5px;">
                            <span>Contraband Found Today:</span>
                            <span id="contraband-today">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Policies Tab -->
            <div class="tab-content" id="policies">
                <div class="panel-title">üìú Prison Policies</div>
                
                <div class="policy-item">
                    <div class="policy-header">
                        <span class="policy-label">üîí Security Level</span>
                        <span class="policy-value" id="security-value">Medium</span>
                    </div>
                    <input type="range" class="policy-slider" id="security-slider" min="1" max="5" value="3" onchange="game.updatePolicy('security', this.value)">
                    <p class="policy-description">Higher security reduces escapes but increases inmate tension.</p>
                </div>

                <div class="policy-item">
                    <div class="policy-header">
                        <span class="policy-label">üìö Rehabilitation Focus</span>
                        <span class="policy-value" id="rehab-value">Balanced</span>
                    </div>
                    <input type="range" class="policy-slider" id="rehab-slider" min="0" max="100" value="50" onchange="game.updatePolicy('rehabilitation', this.value)">
                    <p class="policy-description">Balance between punishment and rehabilitation.</p>
                </div>

                <div class="policy-item">
                    <div class="policy-header">
                        <span class="policy-label">üçΩÔ∏è Food Quality</span>
                        <span class="policy-value" id="food-value">Standard</span>
                    </div>
                    <input type="range" class="policy-slider" id="food-slider" min="1" max="5" value="3" onchange="game.updatePolicy('food', this.value)">
                    <p class="policy-description">Better food improves morale but costs more per day per inmate.</p>
                </div>

                <div class="policy-item">
                    <div class="policy-header">
                        <span class="policy-label">‚è∞ Work Programs</span>
                        <span class="policy-value" id="work-value">Moderate</span>
                    </div>
                    <input type="range" class="policy-slider" id="work-slider" min="0" max="100" value="50" onchange="game.updatePolicy('work', this.value)">
                    <p class="policy-description">Inmate work programs generate income but require supervision.</p>
                </div>

                <div class="policy-item">
                    <div class="policy-header">
                        <span class="policy-label">üõå Cell Quality</span>
                        <span class="policy-value" id="cell-quality-value">Basic</span>
                    </div>
                    <input type="range" class="policy-slider" id="cell-quality-slider" min="1" max="5" value="2" onchange="game.updatePolicy('cellQuality', this.value)">
                    <p class="policy-description">Better cells improve happiness but cost more in maintenance.</p>
                </div>
            </div>

            <!-- Finance Tab -->
            <div class="tab-content" id="finance">
                <div class="panel-title">üíµ Financial Overview</div>
                <div style="display: grid; gap: 15px;">
                    <div class="stat-item" style="justify-content: space-between;">
                        <span>Daily Government Grant</span>
                        <span style="color: #4ade80; font-weight: bold;" id="daily-grant">+$2,000</span>
                    </div>
                    <div class="stat-item" style="justify-content: space-between;">
                        <span>Inmate Work Income</span>
                        <span style="color: #4ade80; font-weight: bold;" id="work-income">$0</span>
                    </div>
                    <div class="stat-item" style="justify-content: space-between;">
                        <span>Staff Salaries</span>
                        <span style="color: #f87171; font-weight: bold;" id="staff-cost">-$0</span>
                    </div>
                    <div class="stat-item" style="justify-content: space-between;">
                        <span>Food Costs</span>
                        <span style="color: #f87171; font-weight: bold;" id="food-cost">-$0</span>
                    </div>
                    <div class="stat-item" style="justify-content: space-between;">
                        <span>Program Costs</span>
                        <span style="color: #f87171; font-weight: bold;" id="program-cost">-$0</span>
                    </div>
                    <div class="stat-item" style="justify-content: space-between;">
                        <span>Maintenance</span>
                        <span style="color: #f87171; font-weight: bold;" id="maintenance-cost">-$0</span>
                    </div>
                    <div class="stat-item" style="justify-content: space-between; border-top: 2px solid #e94560; margin-top: 10px; padding-top: 15px;">
                        <span style="font-weight: bold;">Net Daily Income</span>
                        <span style="font-weight: bold;" id="net-income">+$2,000</span>
                    </div>
                </div>
                <div style="margin-top: 30px;">
                    <h4 style="margin-bottom: 15px; color: #e94560;">Transaction History</h4>
                    <div id="transaction-history" style="max-height: 200px; overflow-y: auto;">
                        <p style="color: #888; font-size: 12px;">Day 1: Initial funding received (+$50,000)</p>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div class="tab-content" id="settings">
                <div class="panel-title">‚öôÔ∏è Game Settings</div>
                
                <div class="policy-item">
                    <div class="policy-header">
                        <span class="policy-label">üíæ Auto-Save</span>
                        <span class="policy-value" id="autosave-value">ON</span>
                    </div>
                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; margin-top: 10px;">
                        <input type="checkbox" id="autosave-toggle" checked onchange="game.toggleAutosave(this.checked)">
                        <span>Automatically save game every 30 seconds</span>
                    </label>
                </div>

                <div class="policy-item">
                    <div class="policy-header">
                        <span class="policy-label">üéÆ Save Management</span>
                    </div>
                    <div style="margin-top: 15px; display: flex; flex-direction: column; gap: 10px;">
                        <button class="btn" onclick="game.saveGame()">üíæ Save Game Now</button>
                        <button class="btn secondary" onclick="game.loadGame()">üìÇ Load Saved Game</button>
                        <button class="btn danger" onclick="game.newGame()">üîÑ Start New Game</button>
                    </div>
                </div>

                <div class="policy-item">
                    <div class="policy-header">
                        <span class="policy-label">üíæ Save Status</span>
                    </div>
                    <div id="save-status" style="margin-top: 10px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px; font-size: 14px;">
                        <span style="color: #888;">No save data found</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel - Quick Stats & Actions -->
        <div class="right-panel">
            <div class="panel">
                <div class="panel-title">üìä Daily Report</div>
                <div id="sidebar-daily-report" style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; font-size: 14px;">
                    <p>Welcome to your new prison facility!</p>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-title">üìà Quick Stats</div>
                <div style="display: grid; gap: 10px;">
                    <div style="display: flex; justify-content: space-between; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                        <span>üí∞ Balance</span>
                        <span id="sidebar-money" style="color: #4ade80; font-weight: bold;">$50,000</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                        <span>üë• Inmates</span>
                        <span id="sidebar-inmates"><span id="sidebar-inmate-count">0</span> / <span id="sidebar-capacity">20</span></span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                        <span>üëÆ Staff</span>
                        <span id="sidebar-staff-count">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                        <span>‚≠ê Reputation</span>
                        <span id="sidebar-reputation" style="color: #a78bfa; font-weight: bold;">50%</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                        <span>üî• Unrest</span>
                        <span id="sidebar-unrest" style="color: #4ade80; font-weight: bold;">Calm</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px; border-left: 3px solid #e94560;">
                        <span>üìÖ Day</span>
                        <span id="sidebar-day" style="color: #e94560; font-weight: bold;">1</span>
                    </div>
                </div>
            </div>
            
            <div class="panel" style="flex: 1;">
                <div class="panel-title">üíµ Daily Finances</div>
                <div style="display: grid; gap: 8px; font-size: 13px;">
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: #888;">Revenue:</span>
                        <span id="sidebar-revenue" style="color: #4ade80;">+$2,000</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: #888;">Expenses:</span>
                        <span id="sidebar-expenses" style="color: #f87171;">-$0</span>
                    </div>
                    <div style="border-top: 1px solid rgba(255,255,255,0.1); margin-top: 8px; padding-top: 8px; display: flex; justify-content: space-between; font-weight: bold;">
                        <span>Net:</span>
                        <span id="sidebar-net">+$2,000</span>
                    </div>
                </div>
                <div style="margin-top: 20px;">
                    <div class="panel-title" style="font-size: 14px; border: none; padding-bottom: 5px;">‚ö° Quick Actions</div>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <button class="btn" style="padding: 10px; font-size: 13px;" onclick="game.acceptIntake()">üì• Accept Intake</button>
                        <button class="btn secondary" style="padding: 10px; font-size: 13px;" onclick="game.nextDay()">‚è≠Ô∏è Next Day</button>
                        <button class="btn warning" style="padding: 10px; font-size: 13px;" onclick="game.conductSearch()">üîç Quick Search</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modal">
        <div class="modal">
            <div class="modal-title" id="modal-title">Title</div>
            <div class="modal-content" id="modal-content">Content</div>
            <div class="modal-actions" id="modal-actions">
                <button class="btn" onclick="game.closeModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
